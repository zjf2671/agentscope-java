-- Copyright 2024-2026 the original author or authors.
--
-- Licensed under the Apache License, Version 2.0 (the "License");
-- you may not use this file except in compliance with the License.
-- You may obtain a copy of the License at
--
--     http://www.apache.org/licenses/LICENSE-2.0
--
-- Unless required by applicable law or agreed to in writing, software
-- distributed under the License is distributed on an "AS IS" BASIS,
-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-- See the License for the specific language governing permissions and
-- limitations under the License.

-- =============================================
-- Boba Tea Shop System Database Structure
-- Created: 2025-09-03
-- Description: Contains four core business tables: users, products, orders, feedback
-- =============================================

-- =============================================
-- Database and User Initialization
-- =============================================

-- Create database (if not exists)
CREATE DATABASE IF NOT EXISTS `${DB_NAME}` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- Create user (if not exists)
CREATE USER IF NOT EXISTS '${DB_USERNAME}'@'%' IDENTIFIED BY '${DB_PASSWORD}';

-- Grant privileges
GRANT ALL PRIVILEGES ON `${DB_NAME}`.* TO '${DB_USERNAME}'@'%';
FLUSH PRIVILEGES;

-- Switch to business database
USE `${DB_NAME}`;

-- =============================================
-- 1. Users Table (users)
-- =============================================
DROP TABLE IF EXISTS `users`;
CREATE TABLE `users` (
    `id` BIGINT(20) NOT NULL COMMENT 'User ID (11-digit random number)',
    `username` VARCHAR(50) NOT NULL COMMENT 'Username',
    `phone` VARCHAR(20) DEFAULT NULL COMMENT 'Phone number',
    `email` VARCHAR(100) DEFAULT NULL COMMENT 'Email',
    `nickname` VARCHAR(50) DEFAULT NULL COMMENT 'Nickname',
    `status` TINYINT(1) DEFAULT 1 COMMENT 'Status: 0-disabled, 1-active',
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'Created time',
    `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Updated time',
    PRIMARY KEY (`id`),
    UNIQUE KEY `uk_username` (`username`),
    UNIQUE KEY `uk_phone` (`phone`),
    KEY `idx_status` (`status`),
    KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='Users table';

-- =============================================
-- 2. Products Table (products)
-- =============================================
DROP TABLE IF EXISTS `products`;
CREATE TABLE `products` (
    `id` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'Product ID',
    `name` VARCHAR(100) NOT NULL COMMENT 'Product name',
    `description` TEXT COMMENT 'Product description',
    `price` DECIMAL(10,2) NOT NULL COMMENT 'Price',
    `stock` INT(11) DEFAULT 0 COMMENT 'Stock quantity',
    `shelf_time` INT(11) DEFAULT 30 COMMENT 'Shelf life (minutes)',
    `preparation_time` INT(11) DEFAULT 5 COMMENT 'Preparation time (minutes)',
    `is_seasonal` TINYINT(1) DEFAULT 0 COMMENT 'Is seasonal product: 0-no, 1-yes',
    `season_start` DATE DEFAULT NULL COMMENT 'Season start date',
    `season_end` DATE DEFAULT NULL COMMENT 'Season end date',
    `is_regional` TINYINT(1) DEFAULT 0 COMMENT 'Is region-limited: 0-no, 1-yes',
    `available_regions` JSON DEFAULT NULL COMMENT 'Available regions list',
    `status` TINYINT(1) DEFAULT 1 COMMENT 'Status: 0-off shelf, 1-on shelf',
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'Created time',
    `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Updated time',
    PRIMARY KEY (`id`),
    UNIQUE KEY `uk_name` (`name`),
    KEY `idx_status` (`status`),
    KEY `idx_is_seasonal` (`is_seasonal`),
    KEY `idx_is_regional` (`is_regional`),
    KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='Products table';

-- =============================================
-- 3. Orders Table (orders)
-- =============================================
DROP TABLE IF EXISTS `orders`;
CREATE TABLE `orders` (
    `id` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'Order ID',
    `order_id` VARCHAR(50) NOT NULL COMMENT 'Order number',
    `user_id` BIGINT(20) NOT NULL COMMENT 'User ID',
    `product_id` BIGINT(20) NOT NULL COMMENT 'Product ID',
    `product_name` VARCHAR(100) NOT NULL COMMENT 'Product name',
    `sweetness` TINYINT(1) NOT NULL COMMENT 'Sweetness: 1-no sugar, 2-less sugar, 3-half sugar, 4-light sugar, 5-regular sugar',
    `ice_level` TINYINT(1) NOT NULL COMMENT 'Ice level: 1-hot, 2-warm, 3-no ice, 4-less ice, 5-regular ice',
    `quantity` INT(11) NOT NULL DEFAULT 1 COMMENT 'Quantity',
    `unit_price` DECIMAL(10,2) NOT NULL COMMENT 'Unit price',
    `total_price` DECIMAL(10,2) NOT NULL COMMENT 'Total price',
    `remark` TEXT DEFAULT NULL COMMENT 'Order remark',
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'Order time',
    `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Updated time',
    PRIMARY KEY (`id`),
    UNIQUE KEY `uk_order_id` (`order_id`),
    KEY `idx_user_id` (`user_id`),
    KEY `idx_product_id` (`product_id`),
    KEY `idx_created_at` (`created_at`),
    CONSTRAINT `fk_orders_user_id` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
    CONSTRAINT `fk_orders_product_id` FOREIGN KEY (`product_id`) REFERENCES `products` (`id`) ON DELETE RESTRICT
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='Orders table';

-- =============================================
-- 4. Feedback Table (feedback)
-- =============================================
DROP TABLE IF EXISTS `feedback`;
CREATE TABLE `feedback` (
    `id` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'Feedback ID',
    `order_id` VARCHAR(50) DEFAULT NULL COMMENT 'Associated order ID',
    `user_id` BIGINT(20) NOT NULL COMMENT 'User ID',
    `feedback_type` TINYINT(2) NOT NULL COMMENT 'Feedback type: 1-product feedback, 2-service feedback, 3-complaint, 4-suggestion',
    `rating` TINYINT(1) DEFAULT NULL COMMENT 'Rating (1-5 stars)',
    `content` TEXT NOT NULL COMMENT 'Feedback content',
    `solution` TEXT DEFAULT NULL COMMENT 'Solution',
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'Feedback time',
    `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'Updated time',
    PRIMARY KEY (`id`),
    KEY `idx_order_id` (`order_id`),
    KEY `idx_user_id` (`user_id`),
    KEY `idx_feedback_type` (`feedback_type`),
    KEY `idx_rating` (`rating`),
    KEY `idx_created_at` (`created_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='Feedback table';

-- =============================================
-- Insert Initial Data
-- =============================================

-- Insert sample user data (50 users, 11-digit random ID)
INSERT INTO `users` (`id`, `username`, `phone`, `email`, `nickname`) VALUES
(12345678901, 'customer001', '13800138001', 'customer001@example.com', '奶茶爱好者'),
(12345678902, 'customer002', '13800138002', 'customer002@example.com', '茶饮达人'),
(12345678903, 'customer003', '13800138003', 'customer003@example.com', '新品体验官'),
(12345678904, 'customer004', '13800138004', 'customer004@example.com', '云边茶客'),
(12345678905, 'customer005', '13800138005', 'customer005@example.com', '茶香四溢'),
(12345678906, 'customer006', '13800138006', 'customer006@example.com', '品味人生'),
(12345678907, 'customer007', '13800138007', 'customer007@example.com', '茶韵悠长'),
(12345678908, 'customer008', '13800138008', 'customer008@example.com', '清香怡人'),
(12345678909, 'customer009', '13800138009', 'customer009@example.com', '茶道中人'),
(12345678910, 'customer010', '13800138010', 'customer010@example.com', '品茶雅士'),
(12345678911, 'customer011', '13800138011', 'customer011@example.com', '茶香满屋'),
(12345678912, 'customer012', '13800138012', 'customer012@example.com', '茶味人生'),
(12345678913, 'customer013', '13800138013', 'customer013@example.com', '茶韵清雅'),
(12345678914, 'customer014', '13800138014', 'customer014@example.com', '茶香醉人'),
(12345678915, 'customer015', '13800138015', 'customer015@example.com', '茶道传承'),
(12345678916, 'customer016', '13800138016', 'customer016@example.com', '茶香四溢'),
(12345678917, 'customer017', '13800138017', 'customer017@example.com', '品茶达人'),
(12345678918, 'customer018', '13800138018', 'customer018@example.com', '茶韵悠扬'),
(12345678919, 'customer019', '13800138019', 'customer019@example.com', '茶香满园'),
(12345678920, 'customer020', '13800138020', 'customer020@example.com', '茶味清雅'),
(12345678921, 'customer021', '13800138021', 'customer021@example.com', '茶道雅士'),
(12345678922, 'customer022', '13800138022', 'customer022@example.com', '茶香怡人'),
(12345678923, 'customer023', '13800138023', 'customer023@example.com', '品茶雅客'),
(12345678924, 'customer024', '13800138024', 'customer024@example.com', '茶韵清幽'),
(12345678925, 'customer025', '13800138025', 'customer025@example.com', '茶香醉心'),
(12345678926, 'customer026', '13800138026', 'customer026@example.com', '茶道雅韵'),
(12345678927, 'customer027', '13800138027', 'customer027@example.com', '茶香满庭'),
(12345678928, 'customer028', '13800138028', 'customer028@example.com', '品茶雅致'),
(12345678929, 'customer029', '13800138029', 'customer029@example.com', '茶韵清雅'),
(12345678930, 'customer030', '13800138030', 'customer030@example.com', '茶香怡人'),
(12345678931, 'customer031', '13800138031', 'customer031@example.com', '茶道雅士'),
(12345678932, 'customer032', '13800138032', 'customer032@example.com', '茶香四溢'),
(12345678933, 'customer033', '13800138033', 'customer033@example.com', '品茶达人'),
(12345678934, 'customer034', '13800138034', 'customer034@example.com', '茶韵悠扬'),
(12345678935, 'customer035', '13800138035', 'customer035@example.com', '茶香满园'),
(12345678936, 'customer036', '13800138036', 'customer036@example.com', '茶味清雅'),
(12345678937, 'customer037', '13800138037', 'customer037@example.com', '茶道雅客'),
(12345678938, 'customer038', '13800138038', 'customer038@example.com', '茶香怡人'),
(12345678939, 'customer039', '13800138039', 'customer039@example.com', '品茶雅士'),
(12345678940, 'customer040', '13800138040', 'customer040@example.com', '茶韵清幽'),
(12345678941, 'customer041', '13800138041', 'customer041@example.com', '茶香醉心'),
(12345678942, 'customer042', '13800138042', 'customer042@example.com', '茶道雅韵'),
(12345678943, 'customer043', '13800138043', 'customer043@example.com', '茶香满庭'),
(12345678944, 'customer044', '13800138044', 'customer044@example.com', '品茶雅致'),
(12345678945, 'customer045', '13800138045', 'customer045@example.com', '茶韵清雅'),
(12345678946, 'customer046', '13800138046', 'customer046@example.com', '茶香怡人'),
(12345678947, 'customer047', '13800138047', 'customer047@example.com', '茶道雅士'),
(12345678948, 'customer048', '13800138048', 'customer048@example.com', '茶香四溢'),
(12345678949, 'customer049', '13800138049', 'customer049@example.com', '品茶达人'),
(12345678950, 'customer050', '13800138050', 'customer050@example.com', '茶韵悠扬');

-- Insert Boba Tea Shop product data
INSERT INTO `products` (`name`, `description`, `price`, `stock`, `shelf_time`, `preparation_time`, `is_seasonal`, `season_start`, `season_end`, `is_regional`, `available_regions`) VALUES
('云边茉莉', '以优质茉莉花茶为基底，茶香清雅，口感甘甜。这款产品灵感来源于云端茉莉的清新与边城茶香的温暖，寓意着茶与自然的完美契合。茉莉花的清香与茶汤的甘甜完美融合，入口清香怡人，回味甘甜。适合喜欢清淡口味的顾客，是夏日解暑的绝佳选择。', 18.00, 120, 30, 5, 1, '2025-03-01', '2025-08-31', 0, NULL),
('桂花云露', '采用桂花乌龙茶底，桂花香气浓郁，搭配丝滑奶盖和香脆坚果。这款产品将传统桂花茶与现代茶饮工艺完美结合，桂花的馥郁香气与乌龙茶的醇厚口感相得益彰。顶部的奶盖和坚果增加了口感的层次感，是秋冬季节的温暖选择。', 22.00, 90, 25, 6, 1, '2025-08-01', '2026-02-01', 1, NULL),
('云雾观音', '精选铁观音茶叶，茶味浓郁，搭配新西兰鲜奶，口感醇厚丝滑。铁观音作为中国传统名茶，以其独特的"观音韵"著称。这款产品将铁观音的醇厚茶香与新西兰鲜奶的丝滑口感完美融合，既保留了传统茶香，又增加了现代茶饮的丰富口感。', 20.00, 110, 30, 5, 0, NULL, NULL, 0, NULL),
('云山红韵', '以大红袍茶叶为基础，茶香浓郁，搭配鲜奶，口感丰富。大红袍作为武夷岩茶的代表，以其独特的岩韵和醇厚口感闻名。这款产品将大红袍的岩韵与鲜奶的醇香完美结合，口感层次丰富，是茶饮爱好者的不二选择。', 19.00, 95, 30, 5, 1, '2024-10-01', '2025-12-31', 1, NULL),
('云桃乌龙', '采用白桃乌龙茶，茶香与果香交融，清新怡人。这款产品将白桃的甜美果香与乌龙茶的醇厚茶香完美融合，口感清新自然，是年轻消费者的最爱。白桃的香甜与乌龙茶的醇厚形成绝妙的味觉体验。', 17.00, 105, 25, 4, 1, '2025-04-01', '2026-03-31', 0, NULL),
('云边普洱', '以云南普洱茶为基础，茶味醇厚，搭配鲜奶，口感顺滑。普洱茶以其独特的陈香和醇厚口感著称，这款产品将普洱茶的醇厚与鲜奶的丝滑完美结合，口感顺滑，回味悠长。适合喜欢浓郁口味的顾客。', 21.00, 85, 35, 6, 1, '2024-11-01', '2025-10-31', 1, NULL),
('云桂龙井', '选用桂花龙井茶，茶香清新，搭配鲜奶，口感细腻。龙井茶作为中国十大名茶之一，以其清香淡雅著称。这款产品将龙井茶的清香与桂花的馥郁香气完美融合，口感细腻，香气怡人。', 19.00, 100, 30, 5, 1, '2025-03-01', '2025-08-31', 1, NULL),
('云峰山茶', '采用山茶乌龙茶叶，茶香浓郁，搭配鲜奶，口感丰富。山茶乌龙茶以其独特的山韵和醇厚口感著称，这款产品将山茶的清香与乌龙茶的醇厚完美结合，口感丰富，层次分明。', 18.00, 88, 30, 5, 0, NULL, NULL, 0, NULL),
('云谷燕麦', '这是一款专为冬季打造的温暖茶饮，选用西藏高原青稞与优质绿茶完美融合，搭配香浓的燕麦奶和特制蜂蜜。青稞的醇香与绿茶的清香相互交织，燕麦奶的丝滑口感带来温暖舒适的体验。顶部撒上烤制过的青稞粒，增加口感的层次感。这款产品不仅美味，还富含膳食纤维和多种维生素，是冬季养生的绝佳选择。', 24.00, 60, 20, 8, 1, '2025-09-01', '2026-02-28', 0, NULL);

-- Insert sample order data (50 orders, randomly distributed from January to August 2025)
INSERT INTO `orders` (`order_id`, `user_id`, `product_id`, `product_name`, `sweetness`, `ice_level`, `quantity`, `unit_price`, `total_price`, `remark`, `created_at`) VALUES
('ORDER_20250101001', 12345678901, 1, '云边茉莉', 5, 5, 1, 18.00, 18.00, '请尽快制作', '2025-01-15 10:30:00'),
('ORDER_20250101002', 12345678902, 2, '桂花云露', 4, 4, 2, 22.00, 44.00, '打包带走', '2025-01-18 14:20:00'),
('ORDER_20250101003', 12345678903, 3, '云雾观音', 3, 3, 1, 20.00, 20.00, '少糖去冰', '2025-01-22 16:45:00'),
('ORDER_20250101004', 12345678904, 4, '云山红韵', 5, 5, 1, 19.00, 19.00, '正常制作', '2025-01-25 11:15:00'),
('ORDER_20250101005', 12345678905, 5, '云桃乌龙', 2, 2, 1, 17.00, 17.00, '微糖温饮', '2025-01-28 13:30:00'),
('ORDER_20250101006', 12345678906, 6, '云边普洱', 4, 4, 2, 21.00, 42.00, '少糖少冰', '2025-02-02 09:20:00'),
('ORDER_20250101007', 12345678907, 7, '云桂龙井', 5, 5, 1, 19.00, 19.00, '标准制作', '2025-02-05 15:10:00'),
('ORDER_20250101008', 12345678908, 8, '云峰山茶', 3, 3, 1, 18.00, 18.00, '半糖去冰', '2025-02-08 12:40:00'),
('ORDER_20250101009', 12345678909, 9, '云谷燕麦', 5, 5, 1, 24.00, 24.00, '冬季限定', '2025-02-12 17:25:00'),
('ORDER_20250101010', 12345678910, 1, '云边茉莉', 4, 4, 2, 18.00, 36.00, '少糖少冰', '2025-02-15 10:50:00'),
('ORDER_20250101011', 12345678911, 2, '桂花云露', 5, 5, 1, 22.00, 22.00, '正常制作', '2025-02-18 14:35:00'),
('ORDER_20250101012', 12345678912, 3, '云雾观音', 2, 2, 1, 20.00, 20.00, '微糖温饮', '2025-02-22 16:20:00'),
('ORDER_20250101013', 12345678913, 4, '云山红韵', 4, 4, 1, 19.00, 19.00, '少糖少冰', '2025-02-25 11:45:00'),
('ORDER_20250101014', 12345678914, 5, '云桃乌龙', 5, 5, 2, 17.00, 34.00, '标准制作', '2025-02-28 13:15:00'),
('ORDER_20250101015', 12345678915, 6, '云边普洱', 3, 3, 1, 21.00, 21.00, '半糖去冰', '2025-03-03 09:30:00'),
('ORDER_20250101016', 12345678916, 7, '云桂龙井', 4, 4, 1, 19.00, 19.00, '少糖少冰', '2025-03-06 15:40:00'),
('ORDER_20250101017', 12345678917, 8, '云峰山茶', 5, 5, 1, 18.00, 18.00, '正常制作', '2025-03-09 12:55:00'),
('ORDER_20250101018', 12345678918, 9, '云谷燕麦', 3, 3, 1, 24.00, 24.00, '半糖去冰', '2025-03-12 17:10:00'),
('ORDER_20250101019', 12345678919, 1, '云边茉莉', 2, 2, 1, 18.00, 18.00, '微糖温饮', '2025-03-15 10:25:00'),
('ORDER_20250101020', 12345678920, 2, '桂花云露', 4, 4, 2, 22.00, 44.00, '少糖少冰', '2025-03-18 14:50:00'),
('ORDER_20250101021', 12345678921, 3, '云雾观音', 5, 5, 1, 20.00, 20.00, '标准制作', '2025-03-22 16:35:00'),
('ORDER_20250101022', 12345678922, 4, '云山红韵', 3, 3, 1, 19.00, 19.00, '半糖去冰', '2025-03-25 11:20:00'),
('ORDER_20250101023', 12345678923, 5, '云桃乌龙', 4, 4, 1, 17.00, 17.00, '少糖少冰', '2025-03-28 13:45:00'),
('ORDER_20250101024', 12345678924, 6, '云边普洱', 5, 5, 2, 21.00, 42.00, '正常制作', '2025-04-02 09:15:00'),
('ORDER_20250101025', 12345678925, 7, '云桂龙井', 2, 2, 1, 19.00, 19.00, '微糖温饮', '2025-04-05 15:30:00'),
('ORDER_20250101026', 12345678926, 8, '云峰山茶', 4, 4, 1, 18.00, 18.00, '少糖少冰', '2025-04-08 12:40:00'),
('ORDER_20250101027', 12345678927, 9, '云谷燕麦', 5, 5, 1, 24.00, 24.00, '标准制作', '2025-04-12 17:55:00'),
('ORDER_20250101028', 12345678928, 1, '云边茉莉', 3, 3, 1, 18.00, 18.00, '半糖去冰', '2025-04-15 10:10:00'),
('ORDER_20250101029', 12345678929, 2, '桂花云露', 4, 4, 2, 22.00, 44.00, '少糖少冰', '2025-04-18 14:25:00'),
('ORDER_20250101030', 12345678930, 3, '云雾观音', 5, 5, 1, 20.00, 20.00, '正常制作', '2025-04-22 16:50:00'),
('ORDER_20250101031', 12345678931, 4, '云山红韵', 2, 2, 1, 19.00, 19.00, '微糖温饮', '2025-04-25 11:35:00'),
('ORDER_20250101032', 12345678932, 5, '云桃乌龙', 4, 4, 1, 17.00, 17.00, '少糖少冰', '2025-04-28 13:20:00'),
('ORDER_20250101033', 12345678933, 6, '云边普洱', 5, 5, 2, 21.00, 42.00, '标准制作', '2025-05-02 09:45:00'),
('ORDER_20250101034', 12345678934, 7, '云桂龙井', 3, 3, 1, 19.00, 19.00, '半糖去冰', '2025-05-05 15:15:00'),
('ORDER_20250101035', 12345678935, 8, '云峰山茶', 4, 4, 1, 18.00, 18.00, '少糖少冰', '2025-05-08 12:30:00'),
('ORDER_20250101036', 12345678936, 9, '云谷燕麦', 5, 5, 1, 24.00, 24.00, '正常制作', '2025-05-12 17:40:00'),
('ORDER_20250101037', 12345678937, 1, '云边茉莉', 2, 2, 1, 18.00, 18.00, '微糖温饮', '2025-05-15 10:55:00'),
('ORDER_20250101038', 12345678938, 2, '桂花云露', 4, 4, 2, 22.00, 44.00, '少糖少冰', '2025-05-18 14:10:00'),
('ORDER_20250101039', 12345678939, 3, '云雾观音', 5, 5, 1, 20.00, 20.00, '标准制作', '2025-05-22 16:25:00'),
('ORDER_20250101040', 12345678940, 4, '云山红韵', 3, 3, 1, 19.00, 19.00, '半糖去冰', '2025-05-25 11:50:00'),
('ORDER_20250101041', 12345678941, 5, '云桃乌龙', 4, 4, 1, 17.00, 17.00, '少糖少冰', '2025-05-28 13:35:00'),
('ORDER_20250101042', 12345678942, 6, '云边普洱', 5, 5, 2, 21.00, 42.00, '正常制作', '2025-06-02 09:20:00'),
('ORDER_20250101043', 12345678943, 7, '云桂龙井', 2, 2, 1, 19.00, 19.00, '微糖温饮', '2025-06-05 15:45:00'),
('ORDER_20250101044', 12345678944, 8, '云峰山茶', 4, 4, 1, 18.00, 18.00, '少糖少冰', '2025-06-08 12:15:00'),
('ORDER_20250101045', 12345678945, 9, '云谷燕麦', 5, 5, 1, 24.00, 24.00, '标准制作', '2025-06-12 17:30:00'),
('ORDER_20250101046', 12345678946, 1, '云边茉莉', 3, 3, 1, 18.00, 18.00, '半糖去冰', '2025-06-15 10:40:00'),
('ORDER_20250101047', 12345678947, 2, '桂花云露', 4, 4, 2, 22.00, 44.00, '少糖少冰', '2025-06-18 14:55:00'),
('ORDER_20250101048', 12345678948, 3, '云雾观音', 5, 5, 1, 20.00, 20.00, '正常制作', '2025-06-22 16:10:00'),
('ORDER_20250101049', 12345678949, 4, '云山红韵', 2, 2, 1, 19.00, 19.00, '微糖温饮', '2025-06-25 11:25:00'),
('ORDER_20250101050', 12345678950, 5, '云桃乌龙', 4, 4, 1, 17.00, 17.00, '少糖少冰', '2025-06-28 13:50:00');

-- Insert sample feedback data (50 feedbacks, corresponding to 50 orders)
INSERT INTO `feedback` (`order_id`, `user_id`, `feedback_type`, `rating`, `content`, `solution`, `created_at`) VALUES
('ORDER_20250101001', 12345678901, 1, 5, '云边茉莉的茶香很清新，口感甘甜，制作速度也很快，整体体验很好！', '感谢您的反馈，我们会继续保持产品质量和服务水准。', '2025-01-15 11:00:00'),
('ORDER_20250101002', 12345678902, 2, 4, '店员服务很热情，制作过程很专业，虽然等待时间稍长，但值得等待。', '感谢您的理解，我们会优化制作流程，减少等待时间。', '2025-01-18 15:00:00'),
('ORDER_20250101003', 12345678903, 1, 5, '云雾观音的茶香很浓郁，搭配鲜奶口感很丝滑，制作速度也很快，整体体验很好！', '感谢您的反馈，我们会继续保持产品质量和服务水准。', '2025-01-22 17:00:00'),
('ORDER_20250101004', 12345678904, 3, 2, '等了很久才做好，而且味道没有想象中好，希望能改进制作流程。', '非常抱歉给您带来不好的体验，我们会加强员工培训，提升制作效率和质量。', '2025-01-25 12:00:00'),
('ORDER_20250101005', 12345678905, 1, 4, '云桃乌龙的口感很清新，果香与茶香融合得很好，推荐！', '感谢您的推荐，我们会继续努力提供优质产品。', '2025-01-28 14:00:00'),
('ORDER_20250101006', 12345678906, 2, 5, '服务态度很好，产品品质也很棒，会继续光顾的！', '感谢您的支持，期待您的再次光临！', '2025-02-02 10:00:00'),
('ORDER_20250101007', 12345678907, 1, 5, '云桂龙井的清香很怡人，口感细腻，非常满意！', '感谢您的满意评价，我们会继续保持！', '2025-02-05 16:00:00'),
('ORDER_20250101008', 12345678908, 4, 3, '建议增加一些新的茶饮品种，丰富选择。', '感谢您的建议，我们会考虑推出更多新品。', '2025-02-08 13:00:00'),
('ORDER_20250101009', 12345678909, 1, 5, '云谷燕麦的温暖口感很适合冬天，青稞的香味很特别！', '感谢您的喜爱，冬季限定产品确实很受欢迎！', '2025-02-12 18:00:00'),
('ORDER_20250101010', 12345678910, 2, 4, '店员很专业，制作过程很规范，整体服务不错。', '感谢您的认可，我们会继续提升服务质量。', '2025-02-15 11:00:00'),
('ORDER_20250101011', 12345678911, 1, 5, '桂花云露的香气很浓郁，层次丰富，非常棒！', '感谢您的喜爱，桂花系列确实很受欢迎！', '2025-02-18 15:00:00'),
('ORDER_20250101012', 12345678912, 3, 2, '等待时间太长了，希望能提高制作效率。', '非常抱歉，我们会加强培训，提高制作速度。', '2025-02-22 17:00:00'),
('ORDER_20250101013', 12345678913, 1, 4, '云山红韵的岩韵很独特，口感层次丰富，推荐！', '感谢您的推荐，大红袍系列确实很有特色！', '2025-02-25 12:00:00'),
('ORDER_20250101014', 12345678914, 2, 5, '服务很周到，产品品质也很稳定，非常满意！', '感谢您的满意，我们会继续保持！', '2025-02-28 14:00:00'),
('ORDER_20250101015', 12345678915, 1, 5, '云边普洱的陈香很醇厚，口感顺滑，很喜欢！', '感谢您的喜爱，普洱茶系列确实很有特色！', '2025-03-03 10:00:00'),
('ORDER_20250101016', 12345678916, 4, 3, '建议增加一些健康茶饮选项，关注养生需求。', '感谢您的建议，我们会考虑推出更多健康茶饮。', '2025-03-06 16:00:00'),
('ORDER_20250101017', 12345678917, 1, 5, '云峰山茶的山韵很独特，口感丰富，层次分明！', '感谢您的喜爱，山茶系列确实很有特色！', '2025-03-09 13:00:00'),
('ORDER_20250101018', 12345678918, 2, 4, '店员很热情，制作过程很专业，整体体验不错。', '感谢您的认可，我们会继续提升服务质量。', '2025-03-12 18:00:00'),
('ORDER_20250101019', 12345678919, 1, 5, '云边茉莉的清香很怡人，口感甘甜，非常喜欢！', '感谢您的喜爱，茉莉系列确实很受欢迎！', '2025-03-15 11:00:00'),
('ORDER_20250101020', 12345678920, 3, 3, '产品味道还可以，但等待时间有点长。', '感谢您的反馈，我们会优化制作流程。', '2025-03-18 15:00:00'),
('ORDER_20250101021', 12345678921, 1, 5, '云雾观音的观音韵很独特，口感醇厚丝滑！', '感谢您的喜爱，铁观音系列确实很有特色！', '2025-03-22 17:00:00'),
('ORDER_20250101022', 12345678922, 2, 4, '服务态度很好，制作过程很规范，推荐！', '感谢您的推荐，我们会继续保持！', '2025-03-25 12:00:00'),
('ORDER_20250101023', 12345678923, 1, 5, '云桃乌龙的口感很清新，果香与茶香融合得很好！', '感谢您的喜爱，果茶系列确实很受欢迎！', '2025-03-28 14:00:00'),
('ORDER_20250101024', 12345678924, 4, 4, '建议增加一些季节限定产品，丰富选择。', '感谢您的建议，我们会推出更多季节限定产品。', '2025-04-02 10:00:00'),
('ORDER_20250101025', 12345678925, 1, 5, '云桂龙井的清香很怡人，口感细腻，非常满意！', '感谢您的满意，龙井系列确实很有特色！', '2025-04-05 16:00:00'),
('ORDER_20250101026', 12345678926, 2, 4, '店员很专业，制作过程很规范，整体服务不错。', '感谢您的认可，我们会继续提升服务质量。', '2025-04-08 13:00:00'),
('ORDER_20250101027', 12345678927, 1, 5, '云谷燕麦的温暖口感很适合，青稞的香味很特别！', '感谢您的喜爱，冬季限定产品确实很受欢迎！', '2025-04-12 18:00:00'),
('ORDER_20250101028', 12345678928, 3, 2, '等待时间太长了，希望能提高制作效率。', '非常抱歉，我们会加强培训，提高制作速度。', '2025-04-15 11:00:00'),
('ORDER_20250101029', 12345678929, 1, 4, '桂花云露的香气很浓郁，层次丰富，推荐！', '感谢您的推荐，桂花系列确实很受欢迎！', '2025-04-18 15:00:00'),
('ORDER_20250101030', 12345678930, 2, 5, '服务很周到，产品品质也很稳定，非常满意！', '感谢您的满意，我们会继续保持！', '2025-04-22 17:00:00'),
('ORDER_20250101031', 12345678931, 1, 5, '云山红韵的岩韵很独特，口感层次丰富！', '感谢您的喜爱，大红袍系列确实很有特色！', '2025-04-25 12:00:00'),
('ORDER_20250101032', 12345678932, 4, 3, '建议增加一些无糖选项，关注健康需求。', '感谢您的建议，我们会考虑推出更多无糖产品。', '2025-04-28 14:00:00'),
('ORDER_20250101033', 12345678933, 1, 5, '云边普洱的陈香很醇厚，口感顺滑，很喜欢！', '感谢您的喜爱，普洱茶系列确实很有特色！', '2025-05-02 10:00:00'),
('ORDER_20250101034', 12345678934, 2, 4, '店员很热情，制作过程很专业，整体体验不错。', '感谢您的认可，我们会继续提升服务质量。', '2025-05-05 16:00:00'),
('ORDER_20250101035', 12345678935, 1, 5, '云峰山茶的山韵很独特，口感丰富，层次分明！', '感谢您的喜爱，山茶系列确实很有特色！', '2025-05-08 13:00:00'),
('ORDER_20250101036', 12345678936, 3, 3, '产品味道还可以，但等待时间有点长。', '感谢您的反馈，我们会优化制作流程。', '2025-05-12 18:00:00'),
('ORDER_20250101037', 12345678937, 1, 5, '云边茉莉的清香很怡人，口感甘甜，非常喜欢！', '感谢您的喜爱，茉莉系列确实很受欢迎！', '2025-05-15 11:00:00'),
('ORDER_20250101038', 12345678938, 2, 4, '服务态度很好，制作过程很规范，推荐！', '感谢您的推荐，我们会继续保持！', '2025-05-18 15:00:00'),
('ORDER_20250101039', 12345678939, 1, 5, '云雾观音的观音韵很独特，口感醇厚丝滑！', '感谢您的喜爱，铁观音系列确实很有特色！', '2025-05-22 17:00:00'),
('ORDER_20250101040', 12345678940, 4, 4, '建议增加一些冷泡茶选项，适合夏天。', '感谢您的建议，我们会考虑推出冷泡茶系列。', '2025-05-25 12:00:00'),
('ORDER_20250101041', 12345678941, 1, 5, '云桃乌龙的口感很清新，果香与茶香融合得很好！', '感谢您的喜爱，果茶系列确实很受欢迎！', '2025-05-28 14:00:00'),
('ORDER_20250101042', 12345678942, 2, 4, '店员很专业，制作过程很规范，整体服务不错。', '感谢您的认可，我们会继续提升服务质量。', '2025-06-02 10:00:00'),
('ORDER_20250101043', 12345678943, 1, 5, '云桂龙井的清香很怡人，口感细腻，非常满意！', '感谢您的满意，龙井系列确实很有特色！', '2025-06-05 16:00:00'),
('ORDER_20250101044', 12345678944, 3, 2, '等待时间太长了，希望能提高制作效率。', '非常抱歉，我们会加强培训，提高制作速度。', '2025-06-08 13:00:00'),
('ORDER_20250101045', 12345678945, 1, 5, '云谷燕麦的温暖口感很适合，青稞的香味很特别！', '感谢您的喜爱，冬季限定产品确实很受欢迎！', '2025-06-12 18:00:00'),
('ORDER_20250101046', 12345678946, 2, 4, '服务很周到，产品品质也很稳定，非常满意！', '感谢您的满意，我们会继续保持！', '2025-06-15 11:00:00'),
('ORDER_20250101047', 12345678947, 1, 5, '桂花云露的香气很浓郁，层次丰富，推荐！', '感谢您的推荐，桂花系列确实很受欢迎！', '2025-06-18 15:00:00'),
('ORDER_20250101048', 12345678948, 4, 3, '建议增加一些低卡路里选项，关注健康需求。', '感谢您的建议，我们会考虑推出更多健康选项。', '2025-06-22 17:00:00'),
('ORDER_20250101049', 12345678949, 1, 5, '云山红韵的岩韵很独特，口感层次丰富！', '感谢您的喜爱，大红袍系列确实很有特色！', '2025-06-25 12:00:00'),
('ORDER_20250101050', 12345678950, 2, 4, '店员很热情，制作过程很专业，整体体验不错。', '感谢您的认可，我们会继续提升服务质量。', '2025-06-28 14:00:00');

-- =============================================
-- Create Indexes to Optimize Query Performance
-- =============================================

-- Create composite indexes for orders table
-- CREATE INDEX `idx_orders_user_created` ON `orders` (`user_id`, `created_at`);
-- CREATE INDEX `idx_orders_product_created` ON `orders` (`product_id`, `created_at`);

-- Create composite indexes for feedback table
-- CREATE INDEX `idx_feedback_user_type` ON `feedback` (`user_id`, `feedback_type`);
-- CREATE INDEX `idx_feedback_rating` ON `feedback` (`rating`);

-- Create composite indexes for products table
-- CREATE INDEX `idx_products_seasonal_status` ON `products` (`is_seasonal`, `status`);
-- CREATE INDEX `idx_products_regional_status` ON `products` (`is_regional`, `status`);

-- =============================================
-- Enum Value Reference
-- =============================================

-- Sweetness enum (sweetness)
-- 1: No sugar
-- 2: Less sugar
-- 3: Half sugar
-- 4: Light sugar
-- 5: Regular sugar

-- Ice level enum (ice_level)
-- 1: Hot
-- 2: Warm
-- 3: No ice
-- 4: Less ice
-- 5: Regular ice

-- Feedback type enum (feedback_type)
-- 1: Product feedback
-- 2: Service feedback
-- 3: Complaint
-- 4: Suggestion

-- Boba Tea Shop Product Reference
-- Classic tea series: Yunbian Jasmine, Osmanthus Cloud Dew, Yunwu Tieguanyin, Yunshan Red Rhyme
-- Specialty tea series: Yuntao Oolong, Yunbian Pu'er, Yungui Longjing, Yunfeng Mountain Tea
-- New recommendation: Yungu Oat (Winter limited edition)

-- =============================================
-- Database Initialization Complete
-- =============================================
